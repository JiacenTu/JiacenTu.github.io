---
layout: post
title:  "Git学习：Git命令总结"
date:   2019-09-11 14:00:00 +0800
categories: Git
tags: Git
---

> 摘要：Git命令总结，长期更新。附链接：[Git 中文手册](https://git-reference.readthedocs.io/zh_CN/latest/)

## Git 配置命令

### 用户信息

第一个要配置的是你个人的用户名称和电子邮件地址。这两条配置很重要，每次 Git 提交时都会引用这两条信息，说明是谁提交了更新，所以会随更新内容一起被永久纳入历史记录:
```sh
$ git config --global user.name "xxx" # 用户名
$ git config --global user.email "xxx" # 邮箱
```

如果用了 –global 选项，那么更改的配置文件就是位于你用户主目录下的那个，以后你所有的项目都会默认使用这里配置的用户信息。如果要在某个特定的项目中使用其他名字或者电邮，只要去掉 –global 选项重新配置即可，新的设定保存在当前项目的 .git/config 文件里。

### 查看配置信息

要检查已有的配置信息，可以使用 git config –list 命令:
```sh
$ git config --list
```

有时候会看到重复的变量名，那就说明它们来自不同的配置文件（比如 /etc/gitconfig 和 \~/.gitconfig），不过最终 Git 实际采用的是最后一个。

也可以直接查阅某个环境变量的设定，只要把特定的名字跟在后面即可，像这样:
```sh
$ git config user.name
```

> 更多命令，附链接：[Git 中文手册 - 初次运行 Git 前的配置](https://git-reference.readthedocs.io/zh_CN/latest/Getting-Started/First-Time-Git-Setup/#id3)

## 获取一个 Git 仓库

### 工作目录中初始化

要对现有的某个项目开始用 Git 管理，只需到此项目所在的目录，执行:
```sh
$ git init
```

初始化后，在当前目录下会出现一个名为 .git 的目录，所有 Git 需要的数据和资源都存放在这个目录中。

### 从现有仓库中克隆

克隆仓库的命令格式为 git clone [url] 。比如，要克隆 Ruby 语言的 Git 代码仓库 Grit，可以用下面的命令:
```sh
$ git clone git://github.com/schacon/grit.git
```

这会在当前目录下创建一个名为 “grit” 的目录，其中包含一个 .git 的目录，用于保存下载下来的所有版本记录，然后从中取出最新版本的文件拷贝。

*通常，如果不指定克隆到指定文件夹，默认会克隆到命令行执行目录下，文件名称为项目名称去掉 .git 后缀。*

如果希望在克隆的时候，自己定义要新建的项目目录名称，可以在上面的命令末尾指定新的名字:
```sh
$ git clone git://github.com/schacon/grit.git mygrit
```

唯一的差别就是，现在新建的目录成了 mygrit，其他的都和上边的一样。

> 更多命令，附链接：[Git 中文手册 - 取得项目的 Git 仓库](https://git-reference.readthedocs.io/zh_CN/latest/Getting-Started/First-Time-Git-Setup/#id3)

## 记录更新以及提交文件

### 将文件添加至暂存区

将指定文件添加至暂存区
```sh
$ git add <fileName]>
```

其他 git add 命令
```sh
# 递归目录，将指定目录下的所有文件添加到暂存区
$ git add <dirName>

# 将工作区所有文件添加到暂存区，包括文件修改以及新文件，但不包括删除文件
$ git add .

# 将已经被add的文件的变化提交到暂存区，包裹文件修改和文件删除，但不包括新文件。省略 dirName 表示当前目录
# -u 是update的简写
$ git add -u [dirName]

# 提交工作区所有的变化，包过文件修改，文件删除，新文件。省略 dirName 表示当前目录
# -u 是All的简写
$ git add -A [dirName]
```

另外 git add . 和 git add * 的区别在于，git add . 会把本地所有 untracked （未加入暂存区）的文件都加入暂存区，并且会根据 .gitignore 做过滤，但是 git add * 会忽略.gitignore把任何文件都加入



### 将文件提交到本地版本库

将暂存区文件提交到本地版本库
```sh
$ git commit -m "说明信息"
```

另外注意下面一个命令
```sh
$ git commit -a
```

这个命令会将修改的文件直接 commit ，跳过 git add 这一步，但是，这个命令只会提交已经被 add 过的文件，并不会 commit 新文件。

> 更多命令，附链接：[Git 中文手册 - 记录每次更新到仓库](https://git-reference.readthedocs.io/zh_CN/latest/Git-Basics/Recording-Changes-to-the-Repository/)

## 将文件推送到远程版本库

### 推送数据到远程仓库

如果要推送到的远程仓库就是当前远程仓库，那么就可以直接推送，否则就会推送失败。

```sh
# 命令格式
$ git push <remote-name> <branch-name>

# 克克隆操作会自动使用默认的 origin 和 master 名字
$ git push origin master
```

### 查看当前远程仓库

查看当前配置有哪些远程仓库，可以用 git remote 命令，它会列出每个远程库的简短名字。在克隆完某个项目后，至少可以看到一个名为 origin 的远程库，Git 默认使用这个名字来标识你所克隆的原始仓库
```sh
$ git remote
origin
```

也可以加上 -v 选项（注:此为 –verbose 的简写，取首字母），显示对应的克隆地址:
```sh
$ git remote -v
origin  git://github.com/schacon/grit.git
```

### 添加远程仓库

要添加一个新的远程仓库，可以指定一个简单的名字，以便将来引用
```sh
$ git remote add <shortname> <url>
```

### 删除远程仓库

需要移除对应的远端仓库，可以运行 git remote rm 命令
```sh
$ git remote rm <shortname>
```

### 直接修改远程仓库

修改命令
```sh
git remote set-url <shortname> <new-url> [<old-url>]
```

> 更多命令，附链接：[Git 中文手册 - 远程仓库的使用](https://git-reference.readthedocs.io/zh_CN/latest/Git-Basics/Working-with-Remotes/)




